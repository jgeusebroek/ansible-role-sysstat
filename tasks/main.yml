---
- name: Include OS-specific variables.
  include_vars: "{{ ansible_os_family }}.yml"

- name: install sysstat package on Debian systems
  apt: name='{{ sysstat_package }}' state=present
  when: ansible_os_family == 'Debian'

- name: install sysstat package on Rhel systems
  yum: name='{{ sysstat_package }}' state=present
  when: ansible_os_family == 'RedHat'

- name: configure sysstat
  template: src='sysstat.config.j2' dest={{ sysstat_config }} owner=root group=root mode=0640

# Normally I would use the cron module instead of templating, but to make this cross platform
# templating seems the best choice. The only downside is to have to restart the cron service.
- name: configure sysstat cron
  template: src='sysstat.cron.j2' dest=/etc/cron.d/sysstat owner=root group=root mode=0640
  notify: restart cron